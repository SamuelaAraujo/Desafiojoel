<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Obras Favoritas</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body onload="renderFavorites()">

<div class="sidebar" id="sidebar">
    <button class="close-btn" onclick="toggleSidebar()">×</button>
    <div class="profile">
        <div class="profile-info">
            <span>Marcus vinicius</span>
        </div>
    </div>
    <ul class="menu-list">
        <li>
            <a href="../Obrasfavoritas/favoritos.html"><i class="fas fa-heart"></i> Favoritos</a>
        </li>
        <li>
            <a href="../meusLivros/index.php"><i class="fas fa-book-open"></i> Meus livros</a>
        </li>
        <li>
            <a href="../historico/index.html"><i class="fas fa-history"></i> Histórico</a>
        </li>
        <li>
            <a href="../MeusDados/index.html"><i class="fas fa-user-edit"></i> Meus Dados</a>
        </li>
        <li>
            <a href="../clube.do.livro/index.php"><i class="fas fa-book-open"></i> Clube Do Livro</a>
        </li>
        <li>
            <a href="../moskito/catalogo.html"><i class="fas fa-book-open"></i> Cadastro de livros</a>
        </li>
    </ul>
    <div class="footer-menu">
        <div class="school-info">
            <img src="imagens/logo.png.png" alt="Logo da Escola">
            <div>
                <h5>ESCOLA ESTADUAL MARIA LUIZA MIRANDA BASTOS</h5>
                <p>terceiro informatica-2025</p>
            </div>
        </div>
    </div>
</div>

<header class="main-header favoritos-header">
    <div class="header-content">
        <nav class="top-nav-favoritos">
            <a href="../inicio/index1.html" class="nav-icon home-icon" aria-label="Início"><i class="fas fa-home"></i></a>
            <div class="search-bar-favoritos">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="" aria-label="Pesquisar">
            </div>
        </nav>

        <div class="header-actions">
            <h1 class="page-title">FAVORITOS</h1>
            <a href="#" class="nav-icon heart-icon-big" aria-label="Minhas Listas"><i class="fas fa-heart"></i></a>
            <a href="#" class="nav-icon profile-icon open-btn" id="open-btn" onclick="toggleSidebar()" aria-label="Perfil do Usuário">
                <i class="fas fa-user-circle"></i>
            </a>
        </div>
    </div>
</header>

<main class="content-favoritos">
    <h2 class="section-title">minhas obras favoritas!!</h2>

    <div class="book-grid-favoritos" id="favorites-grid">
        <div class="book-cover-favorito" style="background-image: url(&quot;../inicio/fotos/61x1ZHomWUL.jpg&quot;);"></div>
    </div>
</main>

<div class="bottom-strip"></div>

<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const openBtn = document.getElementById('open-btn');

        sidebar.classList.toggle('open');
        openBtn.classList.toggle('hidden');
    }

    // Função para renderizar as capas de livros favoritos
    function renderFavorites() {
        const favoritesGrid = document.getElementById('favorites-grid');
        // Limpa qualquer conteúdo estático
        favoritesGrid.innerHTML = '';

        // 1. Tenta carregar os dados
        const favoritesData = JSON.parse(localStorage.getItem('favoritosDataMLMB')) || [];

        if (favoritesData.length === 0) {
            favoritesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; margin-top: 50px;">Nenhum livro adicionado aos favoritos.</p>';
            return;
        }

        // 2. Itera sobre os dados salvos para criar as capas
        favoritesData.forEach(book => {
            const coverDiv = document.createElement('div');
            coverDiv.classList.add('book-cover-favorito');

            // --- LINHA CRÍTICA PARA O AJUSTE DO CAMINHO ---
            // Substitui 'fotos/' pelo caminho relativo CORRETO: '../inicio/fotos/'
            const adjustedUrl = book.coverUrl.replace('fotos/', '../inicio/fotos/');
            coverDiv.style.backgroundImage = `url('${adjustedUrl}')`;

            favoritesGrid.appendChild(coverDiv);
        });
    }

    // 3. Garanta que o corpo da página chama esta função ao carregar
    // (Isso já está na tag <body>: <body onload="renderFavorites()">)
</script>